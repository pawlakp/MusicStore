
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/ErrorStyles.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/modernizr-2.8.3.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css" />
    <link href="~/Content/style.css" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
    <title>@ViewBag.Title</title>
</head>
<body>

    <header>
        <div class="fixed-top">
            <nav class="navbar navbar-dark bg-dark">

                @Html.ActionLink("MusicStore", "Index","Home", null, new { @class = "navbar-brand ml-1" })

                <div class="float-right">
                    <div class="buttons_nav float-right">
                        @Html.Action("Welcome", "Account")
                    </div>
                </div>


                <div id="hidebuttons">
                    @if (@Session["Id"] != null)
                    {
                        <button type="button" class="navbar-toggler">
                            @Html.ActionLink(" ", "UserPanel", "Account", new { id = @Session["Id"] }, new { @class = "bi bi-person" })
                        </button>
                    }
                    else
                    {
                        <button type="button" class="navbar-toggler">
                            @Html.ActionLink(" ", "Login", "Account", null, new { @class = "bi bi-box-arrow-in-right" })
                        </button>
                    }

                    <button type="button" id="menubutton" class="navbar-toggler">
                        <a href="#"><i class="bi bi-list"></i></a>
                    </button>
                </div>


            </nav>
        </div>
    </header>

    <main role="main" class="pb-3">

        <div class="container-fluid justify-content-center" id="data">
                    @RenderBody()
        </div>
    </main>

    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/modernizr-2.8.3.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/musicstore.js"></script>

    <script>
    var ID = document.getElementById('News');
    var IDD = document.getElementById('Products');
    var sendHttpRequest = (method, url) => {
        var promise = new Promise((resolve, reject) => {
            var xhr = new XMLHttpRequest();

            xhr.open(method, url);

            xhr.onload = () => {
                resolve(xhr.response);
            };

            xhr.send();
        });

        return promise;
    };

    window.addEventListener('load', function () {
        sendHttpRequest('GET', '@Url.Action("News", "Admin")').then((responseData) => { ID.innerHTML += responseData })
        sendHttpRequest('GET', '@Url.Action("NumberAllbumsView", "Admin")').then((responseData) => {IDD.innerHTML += responseData})

    })
    </script>
</body>
</html>

